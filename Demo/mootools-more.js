/* MooTools: the javascript framework. license: MIT-style license. copyright: Copyright (c) 2006-2020 [Valerio Proietti](https://mootools.net/).*/ 
/*!
Web Build: https://mootools.net/more/builder/66a14354f247d8434b4e63f6daa02171
*/
MooTools.More={version:"1.6.0",build:"45b71db70f879781a7e0b0d3fb3bb1307c2521eb"},function(){Events.Pseudos=function(e,t,n){var i=function(e){return{store:e.store?function(t,n){e.store("_monitorEvents:"+t,n)}:function(t,n){(e._monitorEvents||(e._monitorEvents={}))[t]=n},retrieve:e.retrieve?function(t,n){return e.retrieve("_monitorEvents:"+t,n)}:function(t,n){return e._monitorEvents?e._monitorEvents[t]||n:n}}},s=function(t){if(-1==t.indexOf(":")||!e)return null;for(var n=Slick.parse(t).expressions[0][0],i=n.pseudos,s=i.length,a=[];s--;){var o=i[s].key,r=e[o];null!=r&&a.push({event:n.tag,value:i[s].value,pseudo:o,original:t,listener:r})}return a.length?a:null};return{addEvent:function(e,n,a){var o=s(e);if(!o)return t.call(this,e,n,a);var r=i(this),c=r.retrieve(e,[]),u=o[0].event,v=Array.slice(arguments,2),h=n,l=this;return o.each(function(e){var t=e.listener,n=h;0==t?u+=":"+e.pseudo+"("+e.value+")":h=function(){t.call(l,e,n,arguments,h)}}),c.include({type:u,event:n,monitor:h}),r.store(e,c),e!=u&&t.apply(this,[e,n].concat(v)),t.apply(this,[u,h].concat(v))},removeEvent:function(e,t){if(!s(e))return n.call(this,e,t);var a=i(this),o=a.retrieve(e);if(!o)return this;var r=Array.slice(arguments,2);return n.apply(this,[e,t].concat(r)),o.each(function(e,i){t&&e.event!=t||n.apply(this,[e.type,e.monitor].concat(r)),delete o[i]},this),a.store(e,o),this}}};var e={once:function(e,t,n,i){t.apply(this,n),this.removeEvent(e.event,i).removeEvent(e.original,t)},throttle:function(e,t,n){t._throttled||(t.apply(this,n),t._throttled=setTimeout(function(){t._throttled=!1},e.value||250))},pause:function(e,t,n){clearTimeout(t._pause),t._pause=t.delay(e.value||250,this,n)}};Events.definePseudo=function(t,n){return e[t]=n,this},Events.lookupPseudo=function(t){return e[t]};var t=Events.prototype;Events.implement(Events.Pseudos(e,t.addEvent,t.removeEvent)),["Request","Fx"].each(function(e){this[e]&&this[e].implement(Events.prototype)})}(),function(){for(var e={relay:!1},t=["once","throttle","pause"],n=t.length;n--;)e[t[n]]=Events.lookupPseudo(t[n]);DOMEvent.definePseudo=function(t,n){return e[t]=n,this};var i=Element.prototype;[Element,Window,Document].invoke("implement",Events.Pseudos(e,i.addEvent,i.removeEvent))}(),function(){DOMEvent.definePseudo("keys",function(e,t,n){var i=n[0],s=[],a=this.retrieve("$moo:keys-pressed",[]),o=e.value;if("+"!=o?s.append(o.replace("++",function(){return s.push("+"),""}).split("+")):s=["+"],a.include(i.key),s.every(function(e){return a.contains(e)})&&t.apply(this,n),this.store("$moo:keys-pressed",a),!this.retrieve("$moo:keys-keyup")){var r=function(e){(function(){a=this.retrieve("$moo:keys-pressed",[]).erase(e.key),this.store("$moo:keys-pressed",a)}).delay(0,this)};this.store("$moo:keys-keyup",r).addEvent("keyup",r)}}),DOMEvent.defineKeys({16:"shift",17:"control",18:"alt",20:"capslock",33:"pageup",34:"pagedown",35:"end",36:"home",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",107:"+",109:"-",189:"-"})}(),function(){var e=this.Keyboard=new Class({Extends:Events,Implements:[Options],options:{defaultEventType:"keydown",active:!1,manager:null,events:{},nonParsedEvents:["activate","deactivate","onactivate","ondeactivate","changed","onchanged"]},initialize:function(e){e&&e.manager&&(this._manager=e.manager,delete e.manager),this.setOptions(e),this._setup()},addEvent:function(t,n,i){return this.parent(e.parse(t,this.options.defaultEventType,this.options.nonParsedEvents),n,i)},removeEvent:function(t,n){return this.parent(e.parse(t,this.options.defaultEventType,this.options.nonParsedEvents),n)},toggleActive:function(){return this[this.isActive()?"deactivate":"activate"]()},activate:function(t){if(t){if(t.isActive())return this;this._activeKB&&t!=this._activeKB&&(this.previous=this._activeKB,this.previous.fireEvent("deactivate")),this._activeKB=t.fireEvent("activate"),e.manager.fireEvent("changed")}else this._manager&&this._manager.activate(this);return this},isActive:function(){return this._manager?this._manager._activeKB==this:e.manager==this},deactivate:function(t){return t?t===this._activeKB&&(this._activeKB=null,t.fireEvent("deactivate"),e.manager.fireEvent("changed")):this._manager&&this._manager.deactivate(this),this},relinquish:function(){return this.isActive()&&this._manager&&this._manager.previous?this._manager.activate(this._manager.previous):this.deactivate(),this},manage:function(e){return e._manager&&e._manager.drop(e),this._instances.push(e),e._manager=this,this._activeKB||this.activate(e),this},drop:function(e){return e.relinquish(),this._instances.erase(e),this._activeKB==e&&(this.previous&&this._instances.contains(this.previous)?this.activate(this.previous):this._activeKB=this._instances[0]),this},trace:function(){e.trace(this)},each:function(t){e.each(this,t)},_instances:[],_disable:function(e){this._activeKB==e&&(this._activeKB=null)},_setup:function(){this.addEvents(this.options.events),e.manager&&!this._manager&&e.manager.manage(this),this.options.active?this.activate():this.relinquish()},_handle:function(e,t){if(!e.preventKeyboardPropagation){var n=!!this._manager;n&&this._activeKB&&(this._activeKB._handle(e,t),e.preventKeyboardPropagation)||(this.fireEvent(t,e),!n&&this._activeKB&&this._activeKB._handle(e,t))}}}),t={},n=["shift","control","alt","meta"],i=/^(?:shift|control|ctrl|alt|meta)$/;e.parse=function(e,s,a){if(a&&a.contains(e.toLowerCase()))return e;if(e=e.toLowerCase().replace(/^(keyup|keydown):/,function(e,t){return s=t,""}),!t[e])if("+"!=e){var o,r={};e.split("+").each(function(e){i.test(e)?r[e]=!0:o=e}),r.control=r.control||r.ctrl;var c=[];n.each(function(e){r[e]&&c.push(e)}),o&&c.push(o),t[e]=c.join("+")}else t[e]=e;return s+":keys("+t[e]+")"},e.each=function(t,n){for(var i=t||e.manager;i;)n(i),i=i._activeKB},e.stop=function(e){e.preventKeyboardPropagation=!0},e.manager=new e({active:!0}),e.trace=function(t){t=t||e.manager;var n=window.console&&console.log;n&&console.log("the following items have focus: "),e.each(t,function(e){n&&console.log(document.id(e.widget)||e.wiget||e)})};var s=function(t){var s=[];n.each(function(e){t[e]&&s.push(e)}),i.test(t.key)||s.push(t.key),e.manager._handle(t,t.type+":keys("+s.join("+")+")")};document.addEvents({keyup:s,keydown:s})}();